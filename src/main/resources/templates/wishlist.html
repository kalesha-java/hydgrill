<!DOCTYPE html>
<html class="no-js" lang="zxx">

<head>
	<meta charset="utf-8" />
	<meta http-equiv="x-ua-compatible" content="ie=edge" />
	<title>Hyderabad Biryani & Grill</title>
	<meta name="author" content="Restar" />
	<meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no" />
	<link rel="manifest" href="assets/img/favicons/manifest.json" />
	<meta name="msapplication-TileColor" content="#ffffff" />
	<meta name="msapplication-TileImage" content="assets/img/favicons/ms-icon-144x144.png" />
	<meta name="theme-color" content="#ffffff" />
	<link rel="preconnect" href="https://fonts.googleapis.com/" />
	<link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin />
	<link
		href="https://fonts.googleapis.com/css2?family=Great+Vibes&amp;family=Open+Sans:ital,wght@0,300..800;1,300..800&amp;family=ZCOOL+XiaoWei&amp;display=swap"
		rel="stylesheet" />
	<link rel="stylesheet" href="assets/css/app.min.css" />
	<link rel="stylesheet" href="assets/css/fontawesome.min.css" />
	<link rel="stylesheet" href="assets/css/style.css" />


</head>

<body>
	<div class="has-smooth" id="has_smooth"></div>
	<div class="sidemenu-wrapper sidemenu-cart">
		<div class="sidemenu-content">
			<button class="closeButton sideMenuCls"><i class="far fa-times"></i></button>
			<div class="widget woocommerce widget_shopping_cart">
				<h3 class="widget_title">Shopping cart</h3>
				<div class="widget_shopping_cart_content">
					<ul class="woocommerce-mini-cart cart_list product_list_widget" id="cart-items">
						<!-- Cart items will be dynamically added here -->
					</ul>
					<p class="woocommerce-mini-cart__total total">
						<strong>Subtotal:</strong> <span class="woocommerce-Price-amount amount"><span
								class="woocommerce-Price-currencySymbol">$</span><span
								id="cart-subtotal">0.00</span></span>
					</p>
					<p class="woocommerce-mini-cart__buttons buttons"><a href="cart.html" class="th-btn wc-forward">View
							cart</a> <a href="checkout.html" class="th-btn checkout wc-forward">Checkout</a></p>
				</div>
			</div>
		</div>
	</div>


	<div class="sidemenu-wrapper sidemenu-info">
		<div class="sidemenu-content">
			<button class="closeButton sideMenuCls"><i class="far fa-times"></i></button>
			<div class="widget">
				<div class="th-widget-about">

					<div class="Center">
						<a href="index.html"><img src="assets/img/logonew.png" alt="logo" /></a>
					</div>
				</div>
			</div>
			<div class="widget">
				<h3 class="widget_title"><span id="user_name"></h3>
				<div class="th-widget-contact">
					<div class="info-box">
						<h4 class="box-title">Address Location</h4>
						<div class="box-content">
							<div class="box-icon"><i class="fas fa-location-dot"></i></div>
							<p class="box-text"><span id="user_address"></span></p>
						</div>
					</div>
					<div class="info-box">
						<h4 class="box-title">Phone Number</h4>
						<div class="box-content">
							<div class="box-icon"><i class="fas fa-phone"></i></div>
							<p class="box-text"><a href="#"><span id="user_phoneNumber"></span></a></p>
						</div>
					</div>
					<div class="info-box">
						<h4 class="box-title">Email address</h4>
						<div class="box-content">
							<div class="box-icon"><i class="fas fa-envelope"></i></div>
							<p class="box-text"><a href="#"><span id="user_email"></span></a></p>
						</div>
					</div>
				</div>
			</div>
			<div class="widget">
				<h3 class="widget_title">Orders</h3>
				<div class="th-widget-contact">
					<div class="info-box">
						<div class="box-content">
							<div class="box-icon"><i class="fas fa-envelope"></i></div>
							<p class="box-text"><a href="#"><span id="user_email"></span></a></p>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="th-menu-wrapper">
		<div class="th-menu-area text-center">
			<button class="th-menu-toggle"><i class="fal fa-times"></i></button>
			<div class="mobile-logo">
				<a href="index.html"><img src="assets/img/logonew.png" alt="logo" /></a>
			</div>
			<div class="th-mobile-menu">
				<ul>
					<li><a href="index.html">Home</a></li>
					<li class="menu-item-has-children">
						<a href="#">Menus</a>
						<ul class="sub-menu">
							<li><a href="../shop.html/soups">SOUPS</a></li>
							<li><a href="../shop.html/appetizers-vegerarian">APPETIZERS - VEGETARIAN</a>
							</li>
							<li><a href="../shop.html/appetizers-non-vegerarian">APPETIZERS -
									NON-VEGETARIAN</a></li>
							<li><a href="../shop.html/tandor-veg">TANDOOR (CLAY OVEN)-VEG</a></li>
							<li><a href="../shop.html/tandoor-non-veg">TANDOOR (CLAY OVEN)-NON-VEG</a>
							</li>
							<li><a href="../shop.html/veg-entrees">VEGETARIAN ENTREES</a></li>
							<li><a href="../shop.html/non-veg-entrees">NON VEGETARIAN ENTREES</a></li>
							<li><a href="../shop.html/dosa-idli">DOSA AND IDLI </a></li>
							<li><a href="../shop.html/indo-chinese-veg">INDO-CHINESE -VEG</a></li>
							<li><a href="../shop.html/indo-chinese-non-veg">INDO-CHINESE-NON VEG</a>
							</li>
							<li><a href="../shop.html/indo-chinese-rice">INDO-CHINESE-RICE</a></li>
							<li><a href="../shop.html/indo-chinese-noodles">INDO-CHINESE-NOODLES</a>
							</li>
							<li><a href="../shop.html/indo-chinese-gravy">INDO-CHINESE-GRAVY</a></li>
							<li><a href="../shop.html/biryani">BIRYANI</a></li>
							<li><a href="../shop.html/pulav">PULAV</a></li>
							<li><a href="../shop.html/rice">RICE SPECIALITIES </a></li>
							<li><a href="../shop.html/breads">BREADS</a></li>
							<li><a href="../shop.html/deserts">DESSERTS</a></li>
							<li><a href="../shop.html/beverages">BEVERAGES</a></li>
							<li><a href="../shop.html/sides">SIDES</a></li>
						</ul>
					</li>
					<li><a href="wishlist.html">Wish List</a></li>
					<li><a href="orders.html">Orders</a></li>
					<li><a href="about.html">About us</a></li>
					<li><a href="contact.html">Contact</a></li>
				</ul>
			</div>
		</div>
	</div>
	<header class="th-header header-layout1">
		<div class="header-top">
			<div class="container">
				<div class="row justify-content-center justify-content-lg-between align-items-center gy-2">
					<div class="col-auto d-none d-lg-block">
						<div class="header-links">
							<ul>
								<li class="d-none d-xxl-inline-block"><i class="fas fa-location-dot"></i> <a
										href="#">11705 Jones Bridge Rd Suite C 201, Johns Creek, GA 30005</a></li>
								<li><i class="fas fa-phone"></i> <a href="tel:+(770) 800-1199">+(770) 800-1199</a></li>
								<li><i class="fas fa-envelope"></i> <a href="#">info@hydgrill.com</a></li>
							</ul>
						</div>
					</div>

				</div>
			</div>
		</div>
		<div class="sticky-wrapper">
			<div class="menu-area">
				<div class="container">
					<div class="row align-items-center justify-content-between">
						<div class="col-auto">
							<div class="header-logo">
								<a href="index.html"><img src="assets/img/logonew.png" alt="logo" /></a>
							</div>
						</div>
						<div class="col-auto">
							<nav class="main-menu d-none d-lg-inline-block">
								<ul>
									<li><a href="index.html">Home</a></li>
									<li class="menu-item-has-children">
										<a href="#">Menus</a>
										<ul class="sub-menu">
											<li><a href="../shop.html/soups">SOUPS</a></li>
											<li><a href="../shop.html/appetizers-vegerarian">APPETIZERS - VEGETARIAN</a>
											</li>
											<li><a href="../shop.html/appetizers-non-vegerarian">APPETIZERS -
													NON-VEGETARIAN</a></li>
											<li><a href="../shop.html/tandor-veg">TANDOOR (CLAY OVEN)-VEG</a></li>
											<li><a href="../shop.html/tandoor-non-veg">TANDOOR (CLAY OVEN)-NON-VEG</a>
											</li>
											<li><a href="../shop.html/veg-entrees">VEGETARIAN ENTREES</a></li>
											<li><a href="../shop.html/non-veg-entrees">NON VEGETARIAN ENTREES</a></li>
											<li><a href="../shop.html/dosa-idli">DOSA AND IDLI </a></li>
											<li><a href="../shop.html/indo-chinese-veg">INDO-CHINESE -VEG</a></li>
											<li><a href="../shop.html/indo-chinese-non-veg">INDO-CHINESE-NON VEG</a>
											</li>
											<li><a href="../shop.html/indo-chinese-rice">INDO-CHINESE-RICE</a></li>
											<li><a href="../shop.html/indo-chinese-noodles">INDO-CHINESE-NOODLES</a>
											</li>
											<li><a href="../shop.html/indo-chinese-gravy">INDO-CHINESE-GRAVY</a></li>
											<li><a href="../shop.html/biryani">BIRYANI</a></li>
											<li><a href="../shop.html/pulav">PULAV</a></li>
											<li><a href="../shop.html/rice">RICE SPECIALITIES </a></li>
											<li><a href="../shop.html/breads">BREADS</a></li>
											<li><a href="../shop.html/deserts">DESSERTS</a></li>
											<li><a href="../shop.html/beverages">BEVERAGES</a></li>
											<li><a href="../shop.html/sides">SIDES</a></li>
										</ul>
									</li>
									<li><a href="wishlist.html">Wish List</a></li>
									<li><a href="orders.html">Orders</a></li>
									<li><a href="about.html">About us</a></li>
									<li><a href="contact.html">Contact</a></li>
								</ul>
							</nav>
						</div>
						<div class="col-auto">
							<div class="header-button">
								<button type="button" class="simple-icon sideMenuToggler"><span class="badge"
										id="cartItemsSize"></span>
									<i class="fal fa-cart-shopping"></i></button>


								<a href="reservation.html" class="th-btn style4 d-none d-xl-block"
									style="border-radius:20px">Book A Table</a> <button type="button"
									class="th-menu-toggle d-block d-lg-none"><i class="far fa-bars"></i></button>
								<a class="th-btn" href="#popup1" id="login_button" style="border-radius:20px">Login</a>

								<button type="button" id="user_button" class="square-btn sideMenuInfo"><i
										class="fal fa-user"></i></button>


							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</header>
	<div id="smooth-wrapper">
		<div id="smooth-content">
			<div class="breadcumb-wrapper" data-bg-src="assets/img/bg/breadcumb-bg.jpg">
				<div class="container">
					<div class="breadcumb-content">
						<h1 class="breadcumb-title">Wishlist</h1>
						<ul class="breadcumb-menu">
							<li><a href="home-restaurant-shop.html">Home</a></li>
							<li>Wishlist</li>
						</ul>
					</div>
				</div>
			</div>
			<div class="space">
				<div class="container">
					<div class="tinv-wishlist woocommerce tinv-wishlist-clear">
						<div class="tinv-header">
							<h2 class="mb-30">Wishlist</h2>
						</div>
						<form action="#" method="post" autocomplete="off">
							<table class="tinvwl-table-manage-list">
								<thead>
									<tr>
										<th class="product-cb"><input type="checkbox" class="global-cb"
												title="Select all for bulk action" /></th>
										<th class="product-remove"></th>
										<th class="product-thumbnail">&nbsp;</th>
										<th class="product-name"><span class="tinvwl-full">Product Name</span><span
												class="tinvwl-mobile">Product</span></th>
										<th class="product-price">Unit Price</th>
										<th class="product-stock">Stock Status</th>
										<th class="product-action">&nbsp;</th>
									</tr>
								</thead>
								<tbody>

								</tbody>
							</table>
						</form>
						<div class="social-buttons">
							<span>Share on</span>
							<ul>
								<li>
									<a href="https://www.facebook.com/sharer/sharer.php?u=permalink"
										class="social social-facebook" title="Facebook"><i
											class="fab fa-facebook-f"></i></a>
								</li>
								<li>
									<a href="https://twitter.com/share?url=permalink" class="social social-twitter"
										title="Twitter"><i class="fab fa-twitter"></i></a>
								</li>
								<li>
									<a href="http://pinterest.com/pin/create/button/?url=permalink"
										class="social social-pinterest" title="Pinterest"><i
											class="fab fa-pinterest-p"></i></a>
								</li>
								<li>
									<a href="https://api.whatsapp.com/send?text=permalink"
										class="social social-whatsapp" title="WhatsApp"><i
											class="fab fa-whatsapp"></i></a>
								</li>
								<li>
									<a href="http://vecurosoft.com/products/wordpress/foodelio/wishlist/974b61/"
										class="social social-clipboard" title="Clipboard"><i
											class="far fa-clipboard"></i></a>
								</li>
								<li>
									<a href="mailto:?body=permalink" class="social social-email" title="Email"><i
											class="far fa-envelope"></i></a>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</div>
			<footer class="footer-wrapper footer-layout1" data-bg-src="assets/img/bg/footer_bg_2.jpg">
				<div class="container z-index-common">
					<div class="newsletter-wrap">
						<div class="newsletter-content">
							<h2 class="sec-title title-ani2 text-white m-0">Subscribe for daily update</h2>
						</div>
						<form class="newsletter-form">
							<div class="form-group"><input class="form-control" type="email" placeholder="Email Address"
									required="" /></div>
							<button type="submit" class="th-btn">Subscribe</button>
						</form>
					</div>
				</div>
				<div class="widget-area">
					<div class="container">
						<div class="row justify-content-between">
							<div class="col-md-6 col-xl-auto">
								<div class="widget footer-widget" style="margin-top:-20px">
									<div class="th-widget-about">
										<div class="about-logo">
											<a href="index.html"><img src="assets/img/logonew.png" alt="logo" /></a>
										</div>
										<p class="about-text">We believe that great food shouldn't break the bank.
											That's why we offer affordable options without compromising on taste.</p>
										<div class="info-box">
											<h4 class="box-title">Address Location</h4>
											<div class="box-content">
												<div class="box-icon"><i class="fas fa-location-dot"></i></div>
												<p class="box-text">11705 Jones Bridge Rd Suite C 201, Johns Creek, GA
													30005</p>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="col-md-6 col-xl-auto">
								<div class="widget widget_nav_menu footer-widget">
									<h3 class="widget_title">Quick Links</h3>
									<div class="menu-all-pages-container">
										<ul class="menu">
											<li><a href="about.html">About us</a></li>
											<li><a href="#">Menus</a></li>
											<li><a href="shop.html">Shop</a></li>
											<li><a href="contact.hml">Contact</a></li>
										</ul>
									</div>
								</div>
							</div>
							<div class="col-md-6 col-xl-auto">
								<div class="widget widget_nav_menu footer-widget">
									<h3 class="widget_title">Food Menu</h3>
									<div class="menu-all-pages-container">
										<ul class="menu">
											<li><a href="shop.html">DOSA AND IDLI </a></li>
											<li><a href="shop.html">INDO-CHINESE -VEG</a></li>
											<li><a href="shop.html">INDO-CHINESE-NON VEG</a></li>
											<li><a href="shop.html">BIRYANI</a></li>
											<li><a href="shop.html">PULAV</a></li>
										</ul>
									</div>
								</div>
							</div>
							<div class="col-md-6 col-xl-auto">
								<div class="widget widget_download footer-widget">
									<h4 class="widget_title">Install App</h4>
									<div class="th-download-widget">
										<p class="footer-text">From App Store or Google Play</p>
										<div class="btn-group">
											<a href="https://www.apple.com/app-store/" class="download-btn"><img
													src="assets/img/icon/app_store_1.png" alt="icon" /> </a>
											<a href="https://play.google.com/store/apps" class="download-btn"><img
													src="assets/img/icon/app_store_2.png" alt="icon" /></a>
										</div>
										<p class="mt-30 mb-3">24/7 Support Center</p>
										<h3 class="box-title"><a href="tel:+(770) 800-1199">+(770) 800-1199</a></h3>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="copyright-wrap">
					<div class="container">
						<div class="row gx-1 gy-2 align-items-center">
							<div class="col-md-7">
								<p class="copyright-text">Copyright <i class="fal fa-copyright"></i> 2024 <a
										href="#">Hyderabad Biryani & Grill</a>. All Rights Reserved.</p>
							</div>
							<div class="col-md-5 text-center text-md-end">
								<div class="footer-links">
									<ul>
										<li><a href="about.html">Terms & Condition</a></li>
										<li><a href="about.html">Privacy & Policy</a></li>
									</ul>
								</div>
							</div>
						</div>
					</div>
				</div>
			</footer>
		</div>
	</div>
	<div class="scroll-top">
		<svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
			<path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"
				style="transition: stroke-dashoffset 10ms linear 0s; stroke-dasharray: 307.919, 307.919; stroke-dashoffset: 307.919;">
			</path>
		</svg>
	</div>
	<script src="assets/js/vendor/jquery-3.7.1.min.js"></script>
	<script src="assets/js/app.min.js"></script>
	<script src="assets/js/main.js"></script>
</body>

<div id="popup1" class="overlay">
	<div class="popup">
		<a class="close" href="#">&times;</a>
		<div class="content">

			<div class="wrapper">
				<div class="title-text">
					<div class="title login">Login Form</div>
					<div class="title signup">Signup Form</div>
				</div>
				<div class="form-container">
					<div class="slide-controls">
						<input type="radio" name="slide" id="login" checked>
						<input type="radio" name="slide" id="signup">
						<label for="login" class="slide login">Login</label>
						<label for="signup" class="slide signup">Signup</label>
						<div class="slider-tab"></div>
					</div>
					<div class="form-inner">
						<form action="#" class="login">
							<div class="field">
								<input type="text" placeholder="Email Address" required>
							</div>
							<div class="field">
								<input type="password" placeholder="Password" required>
							</div>
							<div class="pass-link"><a href="#">Forgot password?</a></div>
							<div class="field btn">
								<div class="btn-layer"></div>
								<input type="submit" value="Login">
							</div>
							<div class="signup-link">Not a member? <a href="">Signup now</a></div>
						</form>
						<form action="#" class="signup">
							<div class="field">
								<input type="text" placeholder="Email Address" required>
							</div>
							<div class="field">
								<input type="password" placeholder="Password" required>
							</div>
							<div class="field">
								<input type="password" placeholder="Confirm password" required>
							</div>
							<div class="field btn">
								<div class="btn-layer"></div>
								<input type="submit" value="Signup">
							</div>
						</form>
					</div>
				</div>
			</div>


			<script>


				const wishListItems = 'wishListItems';
				const cartItems = 'cartItems';

				document.addEventListener('contextmenu', function (event) {
					event.stopPropagation();
				}, true);

				$(document).ready(function () {

					const storedUser = localStorage.getItem("user"); // Retrieve string from localStorage

					if (storedUser) {
						const parsedUser = JSON.parse(storedUser); // Parse the string back into an object

						if (parsedUser.id > 0) {
							$("#user_button").show();
							$("#login_button").hide();
							$("#user_name").text(parsedUser.name);
							$("#user_address").text(parsedUser.address);
							$("#user_phoneNumber").text(parsedUser.phoneNumber);
							$("#user_email").text(parsedUser.email);
						}
					} else {
						console.log("No user found in localStorage");
						$("#user_button").hide();
						$("#login_button").show();
					}
				});

				//cart item display

				document.addEventListener("DOMContentLoaded", function () {
					let cartItems = JSON.parse(localStorage.getItem("cartItems") || "[]");

					// Function to fetch product data from API
					const fetchProductData = async (mealId) => {
						try {
							const response = await fetch(`/api/meals/getbyid/${mealId}`);
							return await response.json();
						} catch (error) {
							console.error("Error fetching product data:", error);
						}
					};

					// Function to update the cart dynamically
					const updateCart = async () => {
						const cartItemsContainer = document.getElementById("cart-items");
						let cartSubtotal = 0;

						// Clear cart items container before inserting new items
						cartItemsContainer.innerHTML = "";

						// Loop through each item in cartItems
						for (let cartItem of cartItems) {
							const product = await fetchProductData(cartItem.mealId);

							if (!product) continue;

							// Use the quantity from cartItems
							const productQuantity = cartItem.quantity || 1;
							const productTotal = product.priceAfterDiscount * productQuantity;
							cartSubtotal += productTotal;

							// Dynamically create cart item
							const cartItemHtml = `
										                <li class="woocommerce-mini-cart-item mini_cart_item">
										                    <a href="#" class="remove remove_from_cart_button" data-id="${product.id}">
										                        <i class="far fa-times"></i>
										                    </a>
										                    <a href="#">
										                        <img src="${product.strMealThumb}" alt="Cart Image" />${product.itemName}
										                    </a>
										                    <span class="quantity">
										                        ${productQuantity} × <span class="woocommerce-Price-amount amount">
										                            <span class="woocommerce-Price-currencySymbol">$</span>${product.priceAfterDiscount.toFixed(2)}
										                        </span>
										                    </span>
										                </li>
										            `;

							// Append the new cart item to the cartItemsContainer
							cartItemsContainer.insertAdjacentHTML("beforeend", cartItemHtml);
						}

						// Update subtotal
						document.getElementById("cart-subtotal").textContent = cartSubtotal.toFixed(2);

						$("#cartItemsSize").text(cartItems.length);

						document.querySelectorAll('.remove_from_cart_button').forEach(button => {
							button.addEventListener('click', function (e) {
								e.preventDefault();
								const mealId = this.getAttribute('data-id');
								removeFromCart(mealId);
							});
						});
					};

					const removeFromCart = (mealId) => {
						// Update the cartItems array to remove the item with the given mealId
						cartItems = cartItems.filter(item => item.mealId !== parseInt(mealId));

						// Update localStorage with the modified cartItems array
						localStorage.setItem("cartItems", JSON.stringify(cartItems));

						updateCart();
					};


					// Initialize the cart update
					updateCart();
				});


				const loginText = document.querySelector(".title-text .login");
				const loginForm = document.querySelector("form.login");
				const loginBtn = document.querySelector("label.login");
				const signupBtn = document.querySelector("label.signup");
				const signupLink = document.querySelector("form .signup-link a");
				signupBtn.onclick = (() => {
					loginForm.style.marginLeft = "-50%";
					loginText.style.marginLeft = "-50%";
				});
				loginBtn.onclick = (() => {
					loginForm.style.marginLeft = "0%";
					loginText.style.marginLeft = "0%";
				});
				signupLink.onclick = (() => {
					signupBtn.click();
					return false;
				});


				document.addEventListener("DOMContentLoaded", function () {
					let cartItems = JSON.parse(localStorage.getItem("cartItems") || "[]");

					// Function to fetch product data from API
					const fetchProductData = async (mealId) => {
						try {
							const response = await fetch(`/api/meals/getbyid/${mealId}`);
							return await response.json();
						} catch (error) {
							console.error("Error fetching product data:", error);
						}
					};

					// Function to update the cart dynamically
					const updateCart = async () => {
						const cartItemsContainer = document.getElementById("cart-items");
						let cartSubtotal = 0;

						// Clear cart items container before inserting new items
						cartItemsContainer.innerHTML = "";

						// Loop through each item in cartItems
						for (let cartItem of cartItems) {
							const product = await fetchProductData(cartItem.mealId);

							if (!product) continue;

							// Use the quantity from cartItems
							const productQuantity = cartItem.quantity || 1;
							const productTotal = product.priceAfterDiscount * productQuantity;
							cartSubtotal += productTotal;

							// Dynamically create cart item
							const cartItemHtml = `
										                <li class="woocommerce-mini-cart-item mini_cart_item">
										                    <a href="#" class="remove remove_from_cart_button" data-id="${product.id}">
										                        <i class="far fa-times"></i>
										                    </a>
										                    <a href="#">
										                        <img src="${product.strMealThumb}" alt="Cart Image" />${product.itemName}
										                    </a>
										                    <span class="quantity">
										                        ${productQuantity} × <span class="woocommerce-Price-amount amount">
										                            <span class="woocommerce-Price-currencySymbol">$</span>${product.priceAfterDiscount.toFixed(2)}
										                        </span>
										                    </span>
										                </li>
										            `;

							// Append the new cart item to the cartItemsContainer
							cartItemsContainer.insertAdjacentHTML("beforeend", cartItemHtml);
						}

						// Update subtotal
						document.getElementById("cart-subtotal").textContent = cartSubtotal.toFixed(2);

						$("#cartItemsSize").text(cartItems.length);

						document.querySelectorAll('.remove_from_cart_button').forEach(button => {
							button.addEventListener('click', function (e) {
								e.preventDefault();
								const mealId = this.getAttribute('data-id');
								removeFromCart(mealId);
							});
						});
					};

					const removeFromCart = (mealId) => {
						// Update the cartItems array to remove the item with the given mealId
						cartItems = cartItems.filter(item => item.mealId !== parseInt(mealId));

						// Update localStorage with the modified cartItems array
						localStorage.setItem("cartItems", JSON.stringify(cartItems));

						updateCart();
					};



				});



				document.addEventListener("DOMContentLoaded", function () {
					// Get the wishlist item IDs from localStorage
					const wishlistIds = JSON.parse(localStorage.getItem("wishListItems") || "[]");

					// Function to fetch product data from API
					const fetchWishlistData = async (wishlistId) => {
						try {
							const response = await fetch(`/api/meals/getbyid/${wishlistId}`);
							return await response.json();
						} catch (error) {
							console.error("Error fetching wishlist data:", error);
						}
					};

					// Function to update the wishlist dynamically
					const updateWishlist = async () => {
						const wishlistTableBody = document.querySelector("tbody");

						for (let wishlistId of wishlistIds) {
							const product = await fetchWishlistData(wishlistId);

							if (!product) continue;

							// Dynamically create wishlist item row
							const wishlistItem = `
				                <tr class="wishlist_item" data-id="${product.id}">
				                    <td class="product-cb">
				                        <input type="checkbox" class="wishlist-checkbox" data-id="${product.id}" title="Select for bulk action" />
				                    </td>
				                    <td class="product-remove">
				                        <button type="submit" class="remove-btn" data-id="${product.id}" title="Remove">
				                            <i class="fal fa-times"></i>
				                        </button>
				                    </td>
				                    <td class="product-thumbnail">
				                        <a><img src="${product.strMealThumb}" alt="${product.itemName}" /></a>
				                    </td>
				                    <td class="product-name"><a>${product.itemName}</a></td>
				                    <td class="product-price">
				                        <span class="woocommerce-Price-amount amount">
				                            <bdi><span class="woocommerce-Price-currencySymbol">$</span>${product.priceAfterDiscount.toFixed(2)}</bdi>
				                        </span>
				                    </td>
				                    <td class="product-stock">
				                        <p class="stock in-stock">
				                            <span><i class="fas fa-check"></i></span><span class="tinvwl-txt">In stock</span>
				                        </p>
				                    </td>
				                    <td class="product-action">
				                        <button type="button" class="button th-btn add-cart" name="tinvwl-add-to-cart" data-id="${product.id}" title="Add to Cart">
				                            <i class="fal fa-shopping-cart"></i><span class="tinvwl-txt">Add to Cart</span>
				                        </button>
				                    </td>
				                </tr>
				            `;

							// Append the new wishlist item row to the table
							wishlistTableBody.insertAdjacentHTML("beforeend", wishlistItem);
						}

						// Append the bulk action row after all items
						const bulkActionRow = `
				            <tr>
				                <td colspan="7" class="actions">
				                    <div class="wishlist-actions">
				                        <button type="button" id="bulk-delete-btn" class="th-btn">Remove Selected</button>
				                        <a href="index.html" class="th-btn">Continue Shopping</a>
				                    </div>
				                </td>
				            </tr>
				        `;
						// Append the bulk action row to the table
						wishlistTableBody.insertAdjacentHTML("beforeend", bulkActionRow);

						// Add event listeners for individual remove buttons
						document.querySelectorAll(".remove-btn").forEach(button => {
							button.addEventListener("click", function () {
								const productId = this.getAttribute("data-id");
								removeWishlistItem(productId);
							});
						});

						document.querySelectorAll(".add-cart").forEach(button => {
							button.addEventListener("click", function () {
								const productId = this.getAttribute("data-id");
								addToCartItem(productId);
							});
						});

						// Add event listener for bulk delete
						document.getElementById("bulk-delete-btn").addEventListener("click", bulkDeleteSelectedItems);
					};

					// Function to remove an item from the wishlist and localStorage
					const removeWishlistItem = (productId) => {
						console.log(productId);
						// Remove the item from the DOM
						const itemRow = document.querySelector(`tr[data-id="${productId}"]`);
						if (itemRow) itemRow.remove();

						// Update the wishlistIds array in localStorage
						const updatedWishlistIds = wishlistIds.filter(id => Number(id) !== Number(productId));
						localStorage.setItem(wishListItems, JSON.stringify(updatedWishlistIds));
					};

					// Function to handle bulk deletion of selected items
					const bulkDeleteSelectedItems = () => {
						const selectedCheckboxes = document.querySelectorAll(".wishlist-checkbox:checked");
						const selectedIds = Array.from(selectedCheckboxes).map(cb => cb.getAttribute("data-id"));

						if (selectedIds.length === 0) {
							alert("Please select items to remove.");
							return;
						}

						// Remove each selected item
						selectedIds.forEach(productId => {
							removeWishlistItem(productId);
						});

						// Update the wishlistIds array in localStorage after bulk deletion
						const updatedWishlistIds = wishlistIds.filter(id => !selectedIds.map(Number).includes(Number(id)));
						localStorage.setItem(wishListItems, JSON.stringify(updatedWishlistIds));

						alert("Selected items have been removed.");
					};

					// Initialize the wishlist update
					updateWishlist();
				});

				function getArrayFromLocalStorage(key) {
					const storedArray = localStorage.getItem(key);
					return storedArray ? JSON.parse(storedArray) : [];
				}

				const addToCartItem = (id) => {
					const cartItems = getArrayFromLocalStorage('cartItems');

					// Find if the item already exists in the cart
					const existingItem = cartItems.find(item => item.mealId === id);

					if (existingItem) {
						// If item exists, increment the quantity
						existingItem.quantity += 1;
					} else {
						// If item doesn't exist, add a new item with quantity 1
						cartItems.push({mealId: Number(id), quantity: 1});
					}

					// Update localStorage
					localStorage.setItem('cartItems', JSON.stringify(cartItems));

					// Redirect to cart page
					window.location.href = "cart.html";
				};

			</script>

</html>